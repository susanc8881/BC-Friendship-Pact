<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Friendship Pact</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">

  <style>
    .text-maroon-700 { color: #8a100b; }
  
    body {
      background-color: #000; 
      
background-image: url('https://media.giphy.com/media/3o7aDcrsww5Ybp18hq/giphy.gif');      background-size: cover; 
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      margin: 0;
      font-family: 'Montserrat', sans-serif;    }
  
    .bg-white\/90, .bg-white\/95 {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
  </style>
</head>
<body>
  
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;
    const { motion, AnimatePresence } = window.Motion;

    const QUESTIONS = [
      { q: "What kind of hangouts do you enjoy most?", options: ["Game night", "Coffee chat", "Workout buddy", "Study sesh", "Movie night"] },
      { q: "What's your ideal weekend?", options: ["Exploring Boston", "Bedrotting", "Volunteering", "Sports games", "Catching up on schoolwork"] },
      { q: "How do you prefer to communicate with friends?", options: ["Texting", "Calling", "Inâ€‘person", "Group chat", "Memes"] },
      { q: "Morning or night person?", options: ["Early bird", "Night owl", "Depends"] },
      { q: "What type of clubs are you interested in?", options: ["Cultural", "Service", "Artistic", "STEM", "Career-Oriented"] },
      { q: "What's your favorite place to study?", options: ["Library", "Dorm", "Outdoors", "I don't study"] },
      { q: "What's your personality type?", options: ["Introvert", "Ambivert", "Extravert"] },
      { q: "How spontaneous are you?", options: ["Very", "Somewhat", "Little", "Not at all"] },
      { q: "Favorite BC tradition?", options: ["Mudstock/Modstock", "Beanpot", "Marmon", "Red Bandana Game", "Stokes Set"] },
      { q: "How do you unwind?", options: ["Music", "Movies", "Reading", "Gym", "Arts & Crafts", "Journaling"] },
      { q: "How big is your ideal friend group?", options: ["1â€‘2 close friends", "Small group", "The more the merrier"] },
      { q: "How important is having the same political views?", options: ["Very important", "A little important", "Doesnâ€™t matter"] },
      { q: "How would you label your political views?", options: ["Very left-leaning", "Liberal", "Moderate", "Conservative", "Very right-leaning"]},
      { q: "Would you like your new friend to be the same gender as you?", options: ["Yes", "Doesn't matter", "No"]},
      { q: "What is your gender identity?", options: ["Woman", "Man", "Nonbinary", "Other"]}
    ];

    function App() {
      const [stage, setStage] = useState("welcome");
      const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
      const [answers, setAnswers] = useState([]);
      const [formData, setFormData] = useState({ firstName: "", lastName: "", email: "" });
      const [isSubmitting, setIsSubmitting] = useState(false);

      const startQuiz = () => setStage("questions");

      const handleAnswer = (option) => {
        const newAnswer = { question: QUESTIONS[currentQuestionIndex].q, answer: option };
        setAnswers([...answers, newAnswer]);
        if (currentQuestionIndex < QUESTIONS.length - 1) {
          setCurrentQuestionIndex(currentQuestionIndex + 1);
        } else {
          setStage("info");
        }
      };

      const handleFormSubmit = async (e) => {
        e.preventDefault();
        if (isSubmitting) return;
        setIsSubmitting(true);

        const dataToSave = {
          firstName: formData.firstName,
          lastName: formData.lastName,
          email: formData.email,
        };

        answers.forEach((item, index) => {
          dataToSave[`Q${index + 1}`] = item.answer;
        });

        try {
          const response = await fetch("https://api.sheetbest.com/sheets/f58c1591-d268-4976-ad57-e753683d99eb", {
            method: "POST",
            mode: "cors",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(dataToSave),
          });

          if (response.ok) {
            setStage("success");
          } else {
            alert("Something went wrong. Please try again.");
            setIsSubmitting(false);
          }
        } catch (error) {
          console.error("Error!", error);
          alert("Connection error.");
          setIsSubmitting(false);
        }
      };

      return (
        <div className="min-h-screen flex flex-col items-center justify-center p-6 text-center">
          <AnimatePresence mode="wait">
            
            {stage === "welcome" && (
                <motion.div 
                    key="welcome" 
                    initial={{ opacity: 0, scale: 0.9 }} 
                    animate={{ opacity: 1, scale: 1 }} 
                    exit={{ opacity: 0 }}
                    className="bg-white/90 p-10 rounded-3xl shadow-2xl flex flex-col items-center justify-center max-w-2xl mx-4"
                >
                    <h1 className="text-6xl font-extrabold mb-4 text-maroon-700 tracking-tighter">
                        Friendship Pact
                    </h1>
        
                    <p className="text-xl text-gray-600 mb-8 max-w-md">
                        Fill out this quick questionnaire to get matched with a new friend at Boston College!
                    </p>

                <button 
                    onClick={startQuiz} 
                    className="w-48 h-16 bg-yellow-500 text-white font-bold text-3xl rounded-full shadow-lg hover:bg-yellow-600 transition-all flex items-center justify-center mx-auto hover:scale-105"
                >
                    Begin
                </button>
            </motion.div>
        )}

            {stage === "questions" && (
              <motion.div 
                key={`question-${currentQuestionIndex}`}
                initial={{ opacity: 0, x: 50 }} 
                animate={{ opacity: 1, x: 0 }} 
                exit={{ opacity: 0, x: -50 }}
                transition={{ duration: 0.4 }}
                className="w-full max-w-md bg-white/95 p-8 rounded-3xl shadow-2xl"
              >
                <div className="w-full h-2 bg-gray-200 rounded-full mb-6 overflow-hidden">
                  <motion.div 
                    className="h-full bg-[#8a100b]" 
                    initial={{ width: 0 }}
                    animate={{ width: `${((currentQuestionIndex + 1) / QUESTIONS.length) * 100}%` }}
                  />
                </div>

                <span className="text-sm font-semibold text-gray-400 uppercase tracking-widest">
                  Question {currentQuestionIndex + 1} of {QUESTIONS.length}
                </span>
                <h2 className="text-2xl font-bold mt-2 mb-6 text-gray-800">{QUESTIONS[currentQuestionIndex].q}</h2>
                <div className="flex flex-col gap-3">
                  {QUESTIONS[currentQuestionIndex].options.map((option) => (
                    <button 
                      key={option} 
                      onClick={() => handleAnswer(option)} 
                      className="px-6 py-3 border-2 border-gray-200 rounded-xl hover:border-yellow-500 hover:bg-yellow-50 transition-all text-left font-medium text-gray-700 hover:text-black"
                    >
                      {option}
                    </button>
                  ))}
                </div>
              </motion.div>
            )}

            {stage === "info" && (
              <motion.div 
                key="info-screen"
                initial={{ opacity: 0, y: 20 }} 
                animate={{ opacity: 1, y: 0 }} 
                exit={{ opacity: 0 }}
                transition={{ duration: 0.5 }}
                className="w-full max-w-sm bg-white/95 p-8 rounded-3xl shadow-2xl"
              >
                <h2 className="text-3xl font-bold mb-6 text-maroon-700">Almost there!</h2>
                <form onSubmit={handleFormSubmit} className="flex flex-col gap-4 text-left">
                  <input required placeholder="First Name" className="w-full p-3 bg-gray-50 border rounded-lg focus:ring-2 focus:ring-yellow-500 outline-none" onChange={(e) => setFormData({...formData, firstName: e.target.value})} />
                  <input required placeholder="Last Name" className="w-full p-3 bg-gray-50 border rounded-lg focus:ring-2 focus:ring-yellow-500 outline-none" onChange={(e) => setFormData({...formData, lastName: e.target.value})} />
                  <input required type="email" placeholder="BC Email" className="w-full p-3 bg-gray-50 border rounded-lg focus:ring-2 focus:ring-yellow-500 outline-none" onChange={(e) => setFormData({...formData, email: e.target.value})} />
                  <button 
                    type="submit" 
                    disabled={isSubmitting}
                    className={`mt-4 py-4 rounded-xl font-bold transition shadow-md ${isSubmitting ? 'bg-gray-400 cursor-not-allowed' : 'bg-black text-white hover:bg-gray-800'}`}
                  >
                    {isSubmitting ? "Submitting..." : "Submit"}
                  </button>
                </form>
              </motion.div>
            )}

            {stage === "success" && (
              <motion.div 
                key="success" 
                initial={{ scale: 0.9, opacity: 0 }} 
                animate={{ scale: 1, opacity: 1 }}
                className="bg-white/95 p-10 rounded-3xl shadow-2xl max-w-md"
              >
                <div className="text-6xl mb-4">ðŸ¦…</div>
                <h2 className="text-3xl font-bold mb-4 text-gray-800">Your new friend awaits...</h2>
                <p className="text-gray-600 mb-2">Thank you for participating in the Friendship Pact!</p>
                <p className="text-gray-600">Look out for updates in your email :&rpar</p>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>